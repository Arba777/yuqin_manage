import{a as i}from"./axios-CCb-kr4I.js";import{S as a,r as u}from"./index-D69LMJuj.js";import{E as s}from"./element-plus-Ctj9zTtO.js";const o=i.create({baseURL:"/sapi",timeout:5e5});o.interceptors.request.use(e=>{const r=a.get().access_token,t=a.get().token_type;return r&&(e.headers.Authorization=`${t} ${r}`),e},e=>Promise.reject(e));o.interceptors.response.use(e=>{const{status_code:r,message:t}=e.data;return r===0||r===200||r===201?e.data:r===404?(s.warning("找不到资源"),e.data):r===400?(s.warning(t),e.data):(s.warning(t||"请求失败"),Promise.reject(new Error(t||"请求失败")))},e=>{const{status_code:r,message:t,detail:n}=e.response.data;return r===500?s.error(t||"服务器内部错误"):r===404?s.error(t||"找不到资源"):r===401?(s.warning("token失效"),u.push("/login")):s.error(t||n),Promise.reject(e)});export{o as s};
